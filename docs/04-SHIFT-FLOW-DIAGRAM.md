# Worker Shift Management Flow Diagram

## ğŸ”„ Complete Shift Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SHIFT MANAGEMENT COMPLETE FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  SHIFT START â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚  Worker   â”‚                    â”‚  Manager    â”‚
              â”‚  Login    â”‚                    â”‚  Assigns    â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”‚  Worker to  â”‚
                    â”‚                          â”‚  Nozzle     â”‚
                    â”‚                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Record Opening  â”‚
                        â”‚ Meter Reading   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Record Opening  â”‚
                        â”‚ Cash in Hand    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Shift Status:   â”‚
                        â”‚ ACTIVE          â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                          â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
              â”‚  DURING   â”‚            â”‚  PARALLEL   â”‚
              â”‚  SHIFT    â”‚            â”‚  TRACKING   â”‚
              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
        â”‚           â”‚           â”‚             â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ Create  â”‚ â”‚ Record â”‚ â”‚ Handle â”‚   â”‚ System  â”‚
   â”‚ Bills   â”‚ â”‚Paymentsâ”‚ â”‚ Credit â”‚   â”‚Auto-Calcâ”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚          â”‚          â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Continuous Updates:          â”‚
          â”‚ - Total Sales                â”‚
          â”‚ - Cash/Digital collected     â”‚
          â”‚ - Credit given               â”‚
          â”‚ - Bills count                â”‚
          â”‚ - Current meter reading      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Optional: Record  â”‚
         â”‚ Intermediate Meter â”‚
         â”‚  Readings (lunch,  â”‚
         â”‚  break times)      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
              â”‚ SHIFT   â”‚
              â”‚  END    â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Manager Initiates  â”‚
         â”‚   Shift Close      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Record Closing     â”‚
         â”‚ Meter Reading      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Auto Calculate:    â”‚
         â”‚ Fuel Sold =        â”‚
         â”‚ Closing - Opening  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Expected Amount:   â”‚
         â”‚ (Fuel Ã— Rate)      â”‚
         â”‚ - Credit Given     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Record Actual      â”‚
         â”‚ Cash + Digital     â”‚
         â”‚ Received           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Calculate Variance â”‚
         â”‚ (Shortage/Excess)  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Manager Review &   â”‚
         â”‚ Approval           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
              â”‚ Shift   â”‚
              â”‚ CLOSED  â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ RECONCILIATION     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Compare:           â”‚
         â”‚ Meter vs Billing   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Generate Detailed  â”‚
         â”‚ Shift Report       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Update Worker      â”‚
         â”‚ Accountability     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
              â”‚  END    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Detailed Step-by-Step Process

### PHASE 1: SHIFT START

#### Step 1.1: Worker Login
```
Worker â†’ Mobile/Web App â†’ Enter credentials
                        â†’ Select Pump (if multiple)
                        â†’ Login
```

#### Step 1.2: Manager Assignment
```
Manager Dashboard â†’ "Assign Worker to Shift"
                  â†’ Select Worker: Ramesh Kumar
                  â†’ Select Nozzle: N1 (Machine 1 - Petrol)
                  â†’ Select Shift Type: Morning/Afternoon/Evening/Night
                  â†’ Click "Start Shift"
```

#### Step 1.3: Record Opening Meter
```
System â†’ Displays Nozzle current reading: 15000.500 L
Manager/Worker â†’ Physically verify meter reading
               â†’ Confirm or correct if needed
               â†’ Record: 15000.500 L
```

#### Step 1.4: Record Opening Cash
```
Manager â†’ Enter opening cash in hand: â‚¹500
        â†’ (Optional for petty change)
```

#### Step 1.5: Shift Activation
```
Database INSERT:
{
  ShiftId: new UUID,
  WorkerId: ramesh_uuid,
  NozzleId: n1_uuid,
  ShiftDate: 2024-01-06,
  ShiftType: "Morning",
  StartTime: 2024-01-06 06:00:00,
  OpeningMeterReading: 15000.500,
  OpeningCash: 500,
  ShiftStatus: "Open"
}
```

---

### PHASE 2: DURING SHIFT (Operations)

#### Operation A: Create Bill

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       CREATE BILL FLOW              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Customer arrives â†’ Requests fuel
   â†“
2. Worker selects fuel type: Petrol
   â†“
3. Worker notes meter BEFORE: 15000.500
   â†“
4. Dispenses fuel â†’ Meter AFTER: 15010.500
   â†“
5. System auto-calculates:
   Quantity = 15010.500 - 15000.500 = 10 L
   Rate = â‚¹102.50 (current rate from database)
   Amount = 10 Ã— 102.50 = â‚¹1,025
   â†“
6. Enter customer details (optional):
   - Name: John Doe
   - Vehicle: MH-01-AB-1234
   - Phone: 9876543210
   â†“
7. Select payment mode:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Cash   â”‚   UPI   â”‚  Card   â”‚ Credit  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
8. If Cash/UPI/Card â†’ Record payment immediately
   If Credit â†’ Link to credit customer
   â†“
9. Generate Bill Number: PUMP001-20240106-0045
   â†“
10. Save bill to database
    â†“
11. Update shift totals:
    - TotalSalesAmount += 1025
    - TotalCashReceived += 1025 (if cash)
    - TotalBills++
    â†“
12. Update tank stock:
    - Tank.CurrentStock -= 10
    â†“
13. Print thermal receipt
    â†“
14. Customer receives receipt â†’ Transaction complete
```

#### Operation B: Handle Credit Transaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     CREDIT BILL FLOW                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Worker selects "Credit Sale"
   â†“
2. Search credit customer:
   - By phone: 9876543220
   - By name: "ABC Transport"
   â†“
3. System displays:
   Customer: ABC Transport Co.
   Credit Limit: â‚¹50,000
   Current Balance: â‚¹15,000
   Available Credit: â‚¹35,000
   â†“
4. Dispense fuel â†’ Amount: â‚¹3,000
   â†“
5. Check: 15,000 + 3,000 = 18,000 < 50,000 âœ“
   â†“
6. Create bill with IsCreditBill = TRUE
   â†“
7. Update customer balance:
   CurrentBalance = 15,000 + 3,000 = â‚¹18,000
   â†“
8. Create credit transaction record:
   {
     TransactionType: "Debit",
     Amount: 3000,
     BalanceBefore: 15000,
     BalanceAfter: 18000,
     WorkerId: ramesh_uuid,
     ShiftId: current_shift_uuid
   }
   â†“
9. Update shift totals:
   - TotalSalesAmount += 3000
   - TotalCreditGiven += 3000
   â†“
10. Print receipt with "CREDIT" stamp
```

#### Operation C: Record Payment from Credit Customer

```
1. Customer comes to pay outstanding balance
   â†“
2. Manager/Worker selects "Record Payment"
   â†“
3. Select customer: ABC Transport Co.
   Current Balance: â‚¹18,000
   â†“
4. Enter payment amount: â‚¹5,000
   â†“
5. Select payment mode: Cash/UPI/Card
   â†“
6. Create credit transaction:
   {
     TransactionType: "Credit",
     Amount: 5000,
     BalanceBefore: 18000,
     BalanceAfter: 13000,
     PaymentMode: "Cash"
   }
   â†“
7. Update customer balance: â‚¹13,000
   â†“
8. If during shift:
   TotalCashReceived += 5000 (not part of sales)
   â†“
9. Generate payment receipt
```

#### Operation D: Intermediate Meter Readings

```
Purpose: Track meter reading at break times for accountability

1. Worker takes lunch break (12:00 PM)
   â†“
2. Record intermediate meter: 15250.300
   â†“
3. System calculates fuel sold so far:
   15250.300 - 15000.500 = 249.8 L
   â†“
4. Compare with bills created:
   Sum of bill quantities = 250 L
   Variance = 0.2 L (acceptable)
   â†“
5. Worker resumes work
```

---

### PHASE 3: SHIFT END (Closure)

#### Step 3.1: Initiate Shift Close
```
Worker completes shift duration (e.g., 8 hours)
                â†“
Worker â†’ Clicks "End Shift" in app
                â†“
Notification sent to Manager
                â†“
Manager â†’ Opens shift details
```

#### Step 3.2: Record Closing Meter Reading
```
Manager/Worker â†’ Physically check nozzle meter
                â†’ Current reading: 15500.750 L
                â†’ Enter in system
                â†“
System validates: 15500.750 > 15000.500 âœ“
```

#### Step 3.3: Auto Calculations
```
Total Fuel Sold = Closing - Opening
                = 15500.750 - 15000.500
                = 500.250 Liters

Total Sales Amount (from bills) = â‚¹51,125

Expected Collection = Total Sales - Credit Given
                    = 51,125 - 6,125
                    = â‚¹45,000

Actual Collection = Cash + Digital
                  = 30,000 + 15,000
                  = â‚¹45,000

Variance = Actual - Expected
         = 45,000 - 45,000
         = â‚¹0 (Balanced)
```

#### Step 3.4: Fuel vs Billing Verification
```
Physical Fuel Sold (Meter) = 500.250 L
Billed Fuel (from bills)   = SUM(all bill quantities)
                           = 500.500 L

Difference = 500.500 - 500.250 = 0.250 L
Variance % = (0.250 / 500.250) Ã— 100 = 0.05%

Status: âœ“ Within acceptable range (<0.5%)
```

#### Step 3.5: Manager Review
```
Manager Dashboard shows:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      SHIFT CLOSURE SUMMARY              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Worker: Ramesh Kumar                    â”‚
â”‚ Shift: Morning (06:00 - 14:00)          â”‚
â”‚ Nozzle: N1 - Machine 1 - Petrol         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Opening Meter: 15000.500 L              â”‚
â”‚ Closing Meter: 15500.750 L              â”‚
â”‚ Fuel Sold:     500.250 L                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Sales:   â‚¹51,125                  â”‚
â”‚ Total Bills:   45                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cash Received:    â‚¹30,000               â”‚
â”‚ Digital Received: â‚¹15,000               â”‚
â”‚ Credit Given:     â‚¹6,125                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Expected Collection: â‚¹45,000            â”‚
â”‚ Actual Collection:   â‚¹45,000            â”‚
â”‚ Variance:            â‚¹0 âœ“               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Meter vs Billing:    0.25 L (0.05%) âœ“   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Manager Actions:
[ Approve & Close Shift ]  [ Request Clarification ]
```

#### Step 3.6: Approve & Close
```
Manager â†’ Reviews all details
        â†’ Clicks "Approve & Close Shift"
        â†“
Database UPDATE:
{
  ShiftId: current_uuid,
  EndTime: 2024-01-06 14:00:00,
  ClosingMeterReading: 15500.750,
  TotalFuelSold: 500.250,
  ShiftStatus: "Closed",
  ClosedBy: manager_uuid
}
        â†“
Worker accountability updated
        â†“
Shift report generated
```

---

### PHASE 4: RECONCILIATION & REPORTING

#### Reconciliation Checks

```
1. Meter Reading Validation
   âœ“ Closing > Opening
   âœ“ Meter reading matches physical dispenser

2. Sales vs Collection
   âœ“ Total Sales = Cash + Digital + Credit
   âœ“ Variance within acceptable limit

3. Fuel Dispensed vs Billed
   âœ“ Meter difference â‰ˆ Sum of bill quantities
   âœ“ Variance < 0.5%

4. Stock Deduction
   âœ“ Tank stock reduced by fuel sold
   âœ“ No negative stock

5. Credit Accountability
   âœ“ All credit bills linked to customers
   âœ“ Customer balances updated
```

#### Shift Report Generated

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    SHIFT PERFORMANCE REPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Shift ID: SH-20240106-001
Worker: Ramesh Kumar (EMP001)
Nozzle: N1 - Machine 1 - Petrol
Date: 06-Jan-2024
Shift Type: Morning
Duration: 06:00 AM - 02:00 PM (8 hours)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FUEL DISPENSED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Opening Meter:    15,000.500 L
Closing Meter:    15,500.750 L
Total Fuel Sold:  500.250 L
Current Rate:     â‚¹102.50/L
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SALES SUMMARY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total Bills:      45
Total Sales:      â‚¹51,125
Average per Bill: â‚¹1,136
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PAYMENT BREAKDOWN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Cash:             â‚¹30,000 (58.7%)
Digital (UPI):    â‚¹15,000 (29.3%)
Credit:           â‚¹6,125  (12.0%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RECONCILIATION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Expected Amount:  â‚¹45,000
Received Amount:  â‚¹45,000
Variance:         â‚¹0 âœ“ BALANCED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ACCOUNTABILITY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Meter vs Billing: 0.25 L (0.05%) âœ“ OK
Credit Given:     3 transactions
Cash Deposited:   â‚¹30,000 âœ“
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
APPROVED BY: Suresh Patel (Manager)
APPROVED AT: 06-Jan-2024 02:15 PM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸš¨ Exception Handling Scenarios

### Scenario 1: Shortage in Cash
```
Expected Collection: â‚¹45,000
Actual Cash + Digital: â‚¹44,500
Shortage: â‚¹500

Manager Action:
1. Review all bills for the shift
2. Check for missing payments
3. Worker provides explanation
4. Manager can:
   - Approve with note (deduct from worker salary)
   - Request worker to pay shortage
   - Mark for investigation
```

### Scenario 2: Excess Cash
```
Expected Collection: â‚¹45,000
Actual Cash + Digital: â‚¹45,500
Excess: â‚¹500

Possible Reasons:
- Previous shift pending amount deposited
- Customer payment for old credit
- Error in recording

Manager Action:
1. Worker provides explanation
2. Manager verifies and approves
3. Excess added to cash in hand for next shift
```

### Scenario 3: Meter vs Billing Mismatch
```
Meter Fuel Sold: 500.250 L
Billed Fuel: 510.500 L
Difference: 10.250 L (2.05%) âš ï¸ HIGH

Possible Reasons:
- Bill recorded without actual fuel dispensing
- Meter reading error
- Fuel leakage/spillage
- Fraud

Manager Action:
1. Review all bills for anomalies
2. Check for duplicate bills
3. Investigate worker
4. Cannot close shift until resolved
```

### Scenario 4: System Failure During Shift
```
Problem: Internet connection lost, system down

Fallback:
1. Worker maintains manual bill register
2. Records:
   - Vehicle number
   - Quantity dispensed
   - Amount
   - Payment mode
3. After system restoration:
   - Manager enters all bills manually
   - Verifies meter reading
   - Completes shift closure
```

---

## ğŸ” Security & Accountability

### Data Integrity
```
1. Meter readings cannot be edited after shift close
2. All changes logged in audit trail
3. Manager approval required for shift closure
4. Worker cannot close own shift
5. Bills cannot be deleted, only voided (with reason)
```

### Worker Accountability
```
Track per worker:
- Total shifts worked
- Average sales per shift
- Shortage/excess history
- Credit issued (for tracking limits)
- Customer complaints (if any)
```

### Fraud Prevention
```
1. Meter reading must increase monotonically
2. Bill quantity must match meter difference
3. Payment modes cross-verified
4. Credit customers pre-approved
5. Manager notifications for:
   - Large cash shortages
   - Excessive credit in one shift
   - High meter vs billing variance
```

---

## ğŸ“± UI/UX Flow

### Worker Mobile App View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš¡ Active Shift                 â”‚
â”‚  Ramesh Kumar â€¢ Nozzle N1       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Started: 06:00 AM              â”‚
â”‚  Duration: 4h 30m               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Today's Performance         â”‚
â”‚  Sales: â‚¹25,500                 â”‚
â”‚  Bills: 22                      â”‚
â”‚  Fuel: 250 L                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [+ Create Bill]                â”‚
â”‚  [ğŸ’° Record Payment]            â”‚
â”‚  [ğŸ“ View Bills]                â”‚
â”‚  [ğŸ›‘ Request Shift End]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Manager Dashboard View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Active Shifts (3)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Ramesh | N1 | â‚¹25,500        â”‚
â”‚  â€¢ Dinesh | N2 | â‚¹18,200        â”‚
â”‚  â€¢ Mahesh | N3 | â‚¹22,800        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [+ Assign New Shift]           â”‚
â”‚  [ğŸ“Š View All Shifts]           â”‚
â”‚  [âš ï¸ Close Pending Shifts (1)]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Next Steps**: Proceed to UI/Dashboard Wireframes
